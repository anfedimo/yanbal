<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

	<script type="text/javascript">
		function guardarNuevaGestion(tip){
			var tipificacion = tip;
			$.getJSON('http://localhost:80/apiagentbox?action=chur&amp;cod=' + tipificacion + '&amp;comm=FIN_LLAMADA',
					function(res) {
						res = JSON.stringify(res);
						var status = JSON.parse(res);
					});
		}
	</script>

	<center>
		<p:growl id="growl" showDetail="true" sticky="true" />
		<h:form id="frmTipificar">
			<p:panel id="pnlTipificar" style="border:none;">
				<f:facet name="header">
					<p:row>
						<p:column colspan="4">
							<p:outputLabel
								value="Tipificar ${tipificarBean.nombreTipificacion}"></p:outputLabel>
						</p:column>
					</p:row>

				</f:facet>

				<p:panelGrid styleClass="companyHeaderGrid" columns="1">

					<p:outputLabel value="Tipificaci&oacute;n:"></p:outputLabel>

					<p:selectOneMenu
						value="#{tipificarBean.selectedCodigoTipificacion}"
						style="width:400px">
						<p:ajax listener="#{tipificarBean.onChangeTipificacion}" />
						<f:selectItem itemLabel="Selecione....." itemValue=""
							noSelectionOption="true" />
						<f:selectItems var="tipificaciones"
							value="#{tipificarBean.tipificaciones}"
							itemValue="#{tipificaciones.idtipificacionpadre}"
							itemLabel="#{tipificaciones.nombretipificacion}" />
					</p:selectOneMenu>


					<p:outputLabel value="Valor a Pagar" for="valor"></p:outputLabel>
					<h:outputText id="valor" value="#{clienteBean.valorCobro}"></h:outputText>


					<p:outputLabel value="Fecha Compromiso" for="fecha"></p:outputLabel>
					<p:calendar id="fecha" value="#{tipificarBean.fechaPromesa}"
						mode="inline" locale="de" navigator="true" pattern="dd-MM-yyyy" />


					<p:outputLabel value="Observaci&oacute;n:" for="txtObsNC"></p:outputLabel>
					<p:inputTextarea value="#{tipificarBean.observacion}" id="txtObsNC"
						style="width:400px" cols="30" maxlength="800"></p:inputTextarea>

				</p:panelGrid>
			</p:panel>

			<p:commandButton value="guardar" icon="ui-icon-disk"
				onclick="guardarNuevaGestion('${tipificarBean.codigoTipificacion}')"
				action="#{gestionBean.guardarGestion}" update="growl">
			</p:commandButton>
			<br />
			<br />
			<p:commandButton action="#{inicioBean.regresarInicio}"
				value="Finalizar Gestion" icon="fa fa-send">
			</p:commandButton>


		</h:form>

	</center>
</ui:composition>
