<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>

	<style>
.dialog .ui-dialog-titlebar {
	background-color: #007FFF;
	color: white;
}
</style>

	<h:outputStylesheet library="css" name="./resources/css/style.css" />
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />



</h:head>



<body>



	<h:form id="frmPromesa">

		<p:dialog id="dlPromesa" closable="true" header="Advertencia"
			widgetVar="dlPromesa" modal="true" styleClass="dialog">
			<p:panel id="pnlDlMensaje">
				<h:outputText value="#{promesaBean.mensajeError}" />
			</p:panel>
		</p:dialog>
		<p:panel id="pnlPromesa">


			<p:messages id="nemsg" closable="true"></p:messages>
			<c:if test="#{promesaBean.inicio}">

				<center>
					<p:panelGrid columns="1" styleClass="companyHeaderGrid">
						<p:outputLabel value="Tipificaci&oacute;n:"
							for="slcTipificacionOtrs"></p:outputLabel>
						<p:selectOneMenu value="#{promesaBean.idTipificacion}"
							style="width:400px" id="slcTipificacionOtrs"
							requiredMessage="Debe seleccionar una tipificaci&oacute;n">
							<f:selectItem itemLabel="Seleccione..." itemValue="" />
							<f:selectItems value="#{promesaBean.tipificaciones}"></f:selectItems>
							<p:ajax event="change" update=""
								listener="#{promesaBean.onChangeTipificacion}" procces="@this" />
						</p:selectOneMenu>
						
						
							<c:if test="#{promesaBean.idTipificacion == 102}">
							<p:outputLabel value="Fecha Promesa:"
							></p:outputLabel>
								<p:calendar value="#{promesaBean.fechaPromesa}"></p:calendar>
								
							</c:if>
						


						<p:outputLabel value="Observaci&oacute;n:" for="txtObsOtros"></p:outputLabel>
						<p:inputTextarea value="#{promesaBean.observacion}"
							id="txtObsOtros" style="width:400px" maxlength="1800"
							requiredMessage="Debe ingresar la observaci&oacute;n"></p:inputTextarea>
						<h:panelGrid columns="2">
							<center>
								<p:commandButton value="Guardar Gestión"
									action="#{promesaBean.guardarPromesa()}"
									update="frmPromesa:pnlPromesa" icon="ui-icon-disk"></p:commandButton>
							</center>
						</h:panelGrid>


					</p:panelGrid>
				</center>

			</c:if>
			<c:if test="#{promesaBean.fin}">
				<center>
					<h1>GESTI&Oacute;N GUARDADA CORRECTAMENTE</h1>
					<p:commandButton onclick="window.close();return false;"
						value="Cerrar"></p:commandButton>
				</center>
			</c:if>

		</p:panel>
	</h:form>


</body>
</html>